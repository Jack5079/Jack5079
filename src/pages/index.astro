---
import BaseHead from "../components/BaseHead.astro"
import Footer from "../components/Footer.astro"
import { SITE_TITLE, SITE_DESCRIPTION } from "../consts"
import { getCollection } from "astro:content"
import FormattedDate from "../components/FormattedDate.astro"
import { siDiscord, siMastodon, siGithub, siCodeberg, siYoutube, siMatrix } from "simple-icons"
import LastName from "../components/LastName.svelte"

const posts = (await getCollection("blog")).sort(
	(a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf()
)

const socials = [
	{
		icon: siDiscord,
		href: "https://discord.com/users/173589391560802306",
		text: "Jack#9701",
	},
	{
		icon: siMatrix,
		href: "https://matrix.to/#/@jack-w:matrix.org",
		text: "@jack-w:matrix.org",
	},
	{
		icon: siMastodon,
		href: "https://wetdry.world/@j",
		text: "@j@wetdry.world",
	},
	{
		icon: {
			title: "Calckey",
			svg: `<svg  version="1.1" viewBox="0 0 .264583 .16259" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
 <g transform="matrix(.00157597 0 0 .00157597 -.00315769 -.00156688)" >
  <path transform="matrix(3.6954,0,0,3.6954,208.34,-284.25)" d="m-41.832 77.19c-3.868 0-7.177 1.358-9.93 4.074-2.716 2.752-4.074 6.063-4.074 9.931 0 3.869 1.358 7.04 4.074 9.793 2.753 2.716 6.064 4.073 9.932 4.073 3.831 0 7.122-1.357 9.875-4.073 0.855-0.855 1.283-1.896 1.283-3.123 0-1.228-0.428-2.271-1.283-3.127-0.856-0.855-1.897-1.281-3.123-1.281-1.229 0-2.27 0.426-3.125 1.281-1.004 1.042-2.213 1.563-3.627 1.563-3.035-0.31-5.208-2.263-5.246-5.106 0.038-2.842 2.21-4.935 5.244-5.246 1.414 0 2.623 0.52 3.627 1.563 0.855 0.855 1.898 1.283 3.127 1.283 1.226 0 2.267-0.428 3.123-1.283 0.855-0.856 1.283-1.897 1.283-3.125 0-1.227-0.428-2.268-1.283-3.123-2.753-2.716-6.046-4.075-9.877-4.075zm20.902 6.91c-2.88 0-5.353 1.02-7.422 3.06-0.642 0.643-0.964 1.426-0.964 2.348 0 0.923 0.322 1.706 0.964 2.35 0.644 0.642 1.427 0.962 2.348 0.962 0.924 0 1.707-0.32 2.35-0.963 0.754-0.783 1.662-1.173 2.724-1.173 1.09 0 2.026 0.376 2.809 1.13a3.909 3.909 0 0 1 1.135 2.811c0 1.062-0.393 1.97-1.176 2.725-0.392 0.419-0.868 0.7-1.426 0.84-0.141 0.027-0.252 0.012-0.336-0.044-0.056-0.084-0.028-0.168 0.084-0.251l0.84-0.881c0.643-0.643 0.965-1.411 0.965-2.305 0-0.922-0.28-1.663-0.838-2.223-0.559-0.559-1.343-0.84-2.35-0.84-0.698 0-1.397 0.35-2.095 1.05l-4.866 4.822c-0.643 0.643-0.964 1.426-0.964 2.347 0 0.923 0.321 1.705 0.964 2.348 1.957 1.93 4.375 2.894 7.254 2.894 2.908 0 5.396-1.034 7.465-3.103 2.041-2.041 3.06-4.5 3.06-7.379 0-2.907-1.019-5.396-3.06-7.465-2.069-2.04-4.557-3.06-7.465-3.06z" clip-rule="evenodd" fill-rule="evenodd"/>
 </g>
</svg>`,
		},
		href: "https://lethallava.land/@j",
		text: "@j@lethallava.land",
	},
	{
		icon: siGithub,
		href: "https://github.com/Jack5079",
		text: "@Jack5079",
	},
	{
		icon: siCodeberg,
		href: "https://codeberg.org/j-w",
		text: "@j-w",
	},
	{
		icon: siYoutube,
		href: "https://youtube.com/@Jack5079",
		text: "@Jack5079",
	},
]
---

<!DOCTYPE html>
<html lang="en">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
		<style>
			ul {
				list-style-type: none;
				padding: unset;
			}
			ul li {
				display: flex;
			}
			ul li :global(time) {
				flex: 0 0 148px;
				font-style: italic;
				color: var(--subtext0);
			}
			ul li a:visited {
				color: var(--sapphire);
			}
			.p-name {
				text-decoration: none;
				color: inherit;
				display: flex;
				flex-direction: row;
				gap: 0.5ch;
				font-size: calc(min(32px, 4vw));
			}
			dl a {
				display: flex;
				gap: 1ch;
				text-decoration: none;
				color: var(--subtext0);
				fill: currentColor;
				font-weight: bold;
			}
			dl a:hover {
				text-decoration: underline;
			}
			dd {
				margin-inline-start: 0;
			}
			dl :global(svg) {
				height: 24px;
			}
			dl {
				margin-block-end: 0;
			}
			h1 {
				display: flex;
				align-items: center;
				gap: 0.5ch;
				margin: 0;
			}
			@media (all) {
				h1 {
					justify-content: center;
				}
				header {
					position: fixed;
					width: 250px;
					top: 2em;
					left: calc(50% - 600px);
					background: var(--surface0);
					padding: 1ch;
					box-sizing: border-box;
					border-radius: 1ch;
					border: 1px solid var(--surface1);
				}
			}
		</style>
	</head>
	<body>
		<header class="h-card">
			<h1 role="none" aria-label="Jack W.">
				<img
					src="/livid.webp"
					alt="photo of a beagle (not me, i am not a beagle) in the kitchen, close up, looking to the left, floppy ears, mouth closed, eyes open"
					class="u-photo"
					height="48px"
					width="48px"
					style="border-radius: 50%;"
				/>
				<a href="/" role="heading" class="p-name u-url u-uid">
					Jack <LastName client:load />
				</a>
			</h1>
			<p class="p-note">
				You don't need to know my last name<br />
				sometimes posts code at <a class="p-org" href="https://cetera.uk">
					<svg
						xmlns="http://www.w3.org/2000/svg"
						viewBox="0 0 173.8 275.72"
						height="20"
						style="vertical-align: middle;"
						role="none"
						fill="currentColor">
						<circle cx="37.13" cy="26.43" r="21.6"></circle>
						<circle cx="34.62" cy="117.87" r="34.62"></circle>
						<circle cx="119.78" cy="130.68" r="21.6"></circle>
						<circle cx="127.16" cy="46.64" r="46.65"></circle>
						<circle cx="102.68" cy="219.58" r="56.14"></circle>
					</svg> Etcetera
				</a>
			</p>
			<!-- for bridgy fed -->
			<a href="acct:j@jack.cab" class="u-url" role="none" aria-hidden hidden tabindex="-1">
			</a>
		</header>

		<dl>
			{
				socials.map(social => (
					<a href={social.href} target="_blank" rel="me">
						<dt set:html={social.icon.svg} aria-label={social.icon.title} />
						<dd>{social.text}</dd>
					</a>
				))
			}
		</dl>

		<!-- <main>
			<section>
				<em>WIP: no actual content yet</em>
				<ul>
					{
						posts.map(post => (
							<li>
								<FormattedDate date={post.data.pubDate} />
								<a href={`/${post.slug}/`}>{post.data.title}</a>
							</li>
						))
					}
				</ul>
			</section>
		</main>
		<Footer /> -->
	</body>
</html>
